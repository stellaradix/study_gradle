/* Gradle Build Phase */

/* 1단계 : Initialization */
// 설정 파일 검색
// 설정 파일 평가해 빌드에 참여하는 프로젝트 및 포함된 빌드를 결정
// 프로젝트마다 Project 인스턴스를 생성

/* 2단계 : Configuration */
// 빌드에 참여하는 모든 프로젝트의 빌드 스크립트를 평가
// 요청된 task 에 대한 task graph 를 생성

/* 3단계 : Execution */
// 선택한 각 작업을 종속성 순서대로 예약하고 실행

println '== Phase 2: Configuration =='
println "Project Name: ${project.name}"
println 'This is executed during the configuration phase.'

tasks.register('configured') {
    println 'This is also executed during the configuration phase, because :configured is used in the build.'
}

tasks.register('test') {
    doLast {
        println 'This is executed during the execution phase.'
    }
}

tasks.register('testBoth') {
	doFirst {
		println '== Phase 3: Execution =='
		println 'This is executed first during the execution phase.'
	}
	doLast {
		println 'This is executed last during the execution phase.'
	}
	println 'This is executed during the configuration phase as well, because :testBoth is used in the build.'
}

// $ gradle test testBoth

// configured task 는 요청되지 않고, test testBoth 가 의존하지 않는 task
// 따라서 configured task 내부의 명령은 실행되지 않는다